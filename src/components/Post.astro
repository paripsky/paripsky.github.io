---
import { Icon } from "astro-icon/components";
import { formatDate } from "../utils/date";

type Mention = {
  title: string;
  url: string;
};

interface Props {
  post: {
    title: string;
    description: string;
    url: string;
    date: string;
    tags: string[];
    mentions: Mention[];
  };
}

const { post } = Astro.props;
---

<li
  class="group relative flex flex-col gap-2 border-l-2 border-transparent pl-4 transition-all py-1"
  data-spotlight
>
  <div
    class="absolute left-[-2px] top-0 bottom-0 w-[2px] bg-zinc-500 transition-opacity duration-300 pointer-events-none"
    style="mask-image: radial-gradient(200px circle at var(--x) var(--y), black, transparent);"
  >
  </div>
  <a href={post.url} class="block h-full">
    <div class="flex flex-col justify-between gap-1 items-baseline">
      <h2
        class="text-pretty text-base font-medium tracking-tight text-neutral-100 group-hover:text-white transition-colors"
      >
        {post.title}
      </h2>
      <span class="text-xs text-neutral-500 font-mono shrink-0"
        >{formatDate(post.date)}
      </span>
    </div>

    <p
      class="text-sm font-light text-pretty leading-relaxed text-neutral-400 mt-1 max-w-xl group-hover:text-neutral-300 transition-colors"
    >
      {post.description}
    </p>
  </a>
  {
    (post.mentions.length > 0 || post.tags.length > 0) && (
      <div class="mt-3 flex flex-wrap gap-y-2 gap-x-4 items-center text-xs">
        <div class="flex flex-wrap">
          {post.mentions.length > 0 && (
            <span class="flex flex-wrap gap-1 text-neutral-400">
              Featured in
              <div class="flex gap-1 flex-wrap">
                {post.mentions.map((mention, i) => (
                  <div class="flex">
                    <a
                      href={mention.url}
                      target="_blank"
                      class="text-neutral-100 hover:text-sky-300 transition-colors"
                    >
                      {mention.title}
                    </a>
                    {i < post.mentions.length - 1 && <span>, </span>}
                  </div>
                ))}
              </div>
            </span>
          )}
        </div>

        <div class="flex gap-2 ml-auto">
          {post.tags.map((tag) => (
            <span class="text-neutral-500">#{tag}</span>
          ))}
        </div>
      </div>
    )
  }
</li>
